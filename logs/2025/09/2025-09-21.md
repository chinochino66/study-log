学ぶこと

1. **CSVの読み込み** → `pd.read_csv("data.csv")`
2. **列の選択・追加・削除**
3. **欠損値の確認と処理** → `.dropna()`, `.fillna()`
4. **簡単な集計** → `.groupby()`, `.mean()`

まずは軽く準備運動。👇

```python
import pandas as pd

# 簡単なデータを作る（CSV読み込みの代わり）
data = {
    "name": ["Chino", "Mika", "Rin", None],
    "score": [95, 88, None, 72],
    "class": ["A", "B", "A", "B"]
}
df = pd.DataFrame(data)
print(df)
```
上記の結果は下記になる。
    name  score class
0  Chino   95.0     A
1   Mika   88.0     B
2    Rin    NaN     A
3   None   72.0     B

---

# 1) 欠損の確認

```python
df.isna()              # True/Falseの表（どこが欠損か）
df.isna().sum()        # 列ごとの欠損個数
df.info()              # 型と非欠損数の要約
```

💡ポイント

* `NaN` も `None` も **欠損** として扱われる。
* `score` は float（小数）に自動昇格している（欠損を表現するため）。

---

# 2) 欠損の処理

## A. 欠損行を落とす（厳しめ）

```python
df_drop = df.dropna()　# 1つでも欠損があれば行ごと削除
df_drop          
```

## B. 欠損を埋める（現実的）

```python
# 文字列の欠損は「不明」で埋める
df_fill = df.copy()
df_fill["name"] = df_fill["name"].fillna("不明")

# 数値の欠損は列平均で埋める（他に中央値/0なども方針次第）
mean_score = df_fill["score"].mean()
df_fill["score"] = df_fill["score"].fillna(mean_score)
df_fill
```

---

# 3) 列の選択・追加・削除

```python
# 選択（列）
df_score = df_fill[["name", "score"]]   # 複数列はリストで

# 追加：合格判定（80点以上を合格とする例）
df_fill["passed"] = df_fill["score"] >= 80

# 削除：列を消す
df_removed = df_fill.drop(columns=["class"])  # 列名で削除
```

---

# 4) 条件抽出・並べ替え

```python
# Aクラスだけ
df_A = df_fill[df_fill["class"] == "A"]

# スコアの高い順に並べ替え
df_sorted = df_fill.sort_values(by="score", ascending=False)
```

---

# 5) 集計（groupby）

```python
# クラスごとの平均点
df_group = df_fill.groupby("class")["score"].mean()
# 複数指標を一気に
df_agg = df_fill.groupby("class")["score"].agg(["count", "mean", "min", "max"])
```

---

## 🧩 クイズ（アウトプット）

1. **欠損の場所を数で確認**：`df` の各列に欠損がいくつあるかを1行で表示せよ。
df.isna().sum()

2. **欠損埋め**：`name` の `None` を `"Unknown"` に、`score` の `NaN` を **列の平均**で埋めるコードを書け。
df_fill = df.copy()
df_fill["name"] = df_fill["name"].fillna("Unknown")

mean_score = df_fill["score"].mean()
df_fill["score"] = df_fill["score"].fillna(mean_score)
df_fill

3. **抽出**：`score` が 85 以上の行だけ取り出せ。
df_over85 = df_fill[df_fill["score"] >= 85]

4. **集計**：`class` ごとの `score` 平均を求めろ。そして高い順に並べ替えろ。
df_group = df_fill.groupby("class")["score"].mean()
df_sorted = df_group.sort_values(ascending=False)  # 高い順（降順）
print(df_sorted)
 
---

## 仕上げ

前処理した `df_fill` を **CSVで保存**して、次回以降も使えるようにしておく。

```python
df_fill.to_csv("clean_scores.csv", index=False, encoding="utf-8")
```


